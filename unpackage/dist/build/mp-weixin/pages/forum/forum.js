(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/forum/forum"],{"1f75":function(t,e,n){"use strict";var o=n("837d"),i=n.n(o);i.a},3766:function(t,e,n){"use strict";(function(t,e){var o=n("47a9");n("20fd");o(n("3240"));var i=o(n("3e92"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(i.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},"3e92":function(t,e,n){"use strict";n.r(e);var o=n("b8f8"),i=n("db5e");for(var u in i)["default"].indexOf(u)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(u);n("1f75");var s=n("828b"),r=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);e["default"]=r.exports},"837d":function(t,e,n){},b8f8:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return o}));var o={uniSegmentedControl:function(){return n.e("uni_modules/uni-segmented-control/components/uni-segmented-control/uni-segmented-control").then(n.bind(null,"a96f"))},uniTag:function(){return n.e("uni_modules/uni-tag/components/uni-tag/uni-tag").then(n.bind(null,"66bb"))}},i=function(){var t=this.$createElement;this._self._c},u=[]},c151:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{posts:[],newPost:{title:"",content:""},showReplyWindow:!1,showReplyInfo:!1,replyContent:"",selectedPost:null,user:t.getStorageSync("xm-user"),replies:[],items:["全部","骑手","普通用户"],current:"全部",role:""}},onLoad:function(){this.load(),t.$on("postAdded",this.load)},methods:{load:function(){var t=this;"全部"==this.current?this.$request.get("/forum/selectAll/").then((function(e){t.posts=e.data||[]})):this.$request.get("/forum/selectByRole/"+this.current).then((function(e){t.posts=e.data||[]}))},onClickItem:function(t){this.current=this.items[t.currentIndex],this.load()},submitPost:function(){t.navigateTo({url:"/pages/edit/edit"})},reply:function(t){this.selectedPost=t,this.showReplyWindow=!0},post:function(t){t.liked=!t.liked,t.liked?(t.otherinfo++,this.$request.put("/forum/update",t).then((function(){})).catch((function(t){console.error("点赞失败：",t)}))):(t.otherinfo--,this.$request.put("/forum/update",t).then((function(){})).catch((function(t){console.error("点赞失败：",t)})))},showReplies:function(t){var e=this;this.selectedPost=t,this.$request.get("/reply/selectAll",{params:{userId:t.id}}).then((function(t){e.replies=t.data||[],e.showReplyInfo=!0})).catch((function(t){console.error("获取回复信息失败：",t)}))},closeReplyWindow:function(){this.showReplyWindow=!1},closeReplyInfo:function(){this.showReplyInfo=!1},submitReply:function(){var t=this;this.form.replyUser=this.user.id,this.$request.post("/reply/add",{postId:this.selectedPost.id,content:this.replyContent}).then((function(){t.showReplyWindow=!1,t.load()})).catch((function(t){console.error("提交回复失败：",t)}))}}};e.default=n}).call(this,n("df3c")["default"])},db5e:function(t,e,n){"use strict";n.r(e);var o=n("c151"),i=n.n(o);for(var u in o)["default"].indexOf(u)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(u);e["default"]=i.a}},[["3766","common/runtime","common/vendor"]]]);