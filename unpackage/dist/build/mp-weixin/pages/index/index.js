(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"0935":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return o}));var o={uniNoticeBar:function(){return n.e("uni_modules/uni-notice-bar/components/uni-notice-bar/uni-notice-bar").then(n.bind(null,"fce3"))},uniTag:function(){return n.e("uni_modules/uni-tag/components/uni-tag/uni-tag").then(n.bind(null,"66bb"))},uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,"0a5c"))}},i=function(){var t=this.$createElement;this._self._c},s=[]},"0b29":function(t,e,n){},"308b":function(t,e,n){"use strict";n.r(e);var o=n("3f92"),i=n.n(o);for(var s in o)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(s);e["default"]=i.a},"3f92":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={data:function(){return{imgs:[n("af67"),n("399c")],content:"",noticeList:[],inter:null,orderList:[],user:t.getStorageSync("xm-user"),orderList2:[],orderList1:[],transaction:[],form:{}}},onShow:function(){this.load(),this.loadNotice()},onHide:function(){clearInterval(this.inter),this.inter=null},methods:{del2:function(e){var n=this;this.$request.del("/transaction/delete/"+e).then((function(e){"200"===e.code?(t.showToast({icon:"success",title:"操作成功"}),n.load()):t.showToast({icon:"none",title:e.msg})}))},accept:function(e){var n=this;this.user.rider?this.$request.put("/orders/accept",e).then((function(e){"200"===e.code?(t.showToast({icon:"success",title:"操作成功"}),n.load()):t.showToast({icon:"none",title:e.msg})})):t.showToast({icon:"none",title:"只有认证骑手才可以接单"})},goDetail:function(e){t.navigateTo({url:"/pages/detail/detail?orderId="+e})},goSDetail:function(e){t.navigateTo({url:"/pages/trans_detail/trans_detail?sId="+e})},goPreOrder:function(e){var n=t.getStorageSync("orderStore")||{};n.type=e,t.setStorageSync("orderStore",n),t.navigateTo({url:"/pages/preorder/preorder"})},load:function(){var t=this;this.$request.get("/orders/selectAll",{status:"待接单"}).then((function(e){t.orderList=e.data||[]})),this.$request.get("/orders/selectAll",{status:"待收货"}).then((function(e){t.orderList1=e.data||[]})),this.$request.get("/orders/selectAll",{acceptId:this.user.id}).then((function(e){t.orderList2=e.data||[]})),this.$request.get("/transaction/selectAll",{userId:this.user.id}).then((function(e){t.transaction=e.data||[]}))},addorder:function(e){var n=this;this.form.name=e.title,this.form.descr=e.content,this.form.weight=e.otherinfo,this.form.price=e.price,this.form.userId=e.userId,this.form.tid=e.acceptId,this.form.status="待接单",this.form.addressId=e.addressId,this.form.targetId=e.targetId,this.form.type="二手交易",this.$request.post("/orders/addOrder",this.form).then((function(o){"200"===o.code?(t.showToast({icon:"success",title:"成功"}),n.del(e),n.load()):t.showToast({icon:"none",title:o.msg})})).catch((function(t){console.error(t)}))},del:function(e){var n=this;this.$request.del("/transaction/delete/"+e.id).then((function(e){"200"===e.code?(t.showToast({icon:"success",title:"操作成功"}),n.load()):t.showToast({icon:"none",title:e.msg})}))},loadNotice:function(){var t=this;this.$request.get("/notice/selectAll").then((function(e){t.noticeList=e.data||[];var n=0;t.content=t.noticeList.length?t.noticeList[n].content:"",t.noticeList.length>1&&(t.inter=setInterval((function(){n++,n===t.noticeList.length&&(n=0),t.content=t.noticeList[n].content}),5e3))}))},arrive:function(e){var n=this;e.status="待收货",this.$request.put("/orders/update",e).then((function(e){"200"===e.code?(t.showToast({icon:"success",title:"操作成功"}),n.load()):t.showToast({icon:"none",title:e.msg})}))},changeStatus:function(e,n){var o=this;e.status=n,this.$request.put("/orders/update",e).then((function(e){"200"===e.code?(t.showToast({icon:"success",title:"操作成功"}),o.load()):t.showToast({icon:"none",title:e.msg})}))}}};e.default=o}).call(this,n("df3c")["default"])},"51ff":function(t,e,n){"use strict";var o=n("0b29"),i=n.n(o);i.a},7017:function(t,e,n){"use strict";n.r(e);var o=n("0935"),i=n("308b");for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("51ff");var r=n("828b"),c=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);e["default"]=c.exports},9366:function(t,e,n){"use strict";(function(t,e){var o=n("47a9");n("20fd");o(n("3240"));var i=o(n("7017"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(i.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])}},[["9366","common/runtime","common/vendor"]]]);