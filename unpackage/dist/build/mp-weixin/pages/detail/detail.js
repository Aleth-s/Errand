(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/detail/detail"],{2955:function(t,e,n){"use strict";n.r(e);var a=n("88b3"),i=n("4c60");for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("be11");var r=n("828b"),u=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=u.exports},"4c60":function(t,e,n){"use strict";n.r(e);var a=n("4f6d"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},"4f6d":function(t,e,n){"use strict";(function(t,a){var i=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("9b30")),r={data:function(){return{forms:{},user:t.getStorageSync("xm-user"),orders:{},showInfo:!1,colist:[],cerlist:{},coo:!1,wordCloudImageUrl:null,id:0,title:"map",latitude:0,longitude:0,markers:[{iconPath:"/static/imgs/qishou.png",id:1,latitude:0,longitude:0,width:30,height:30,callout:{content:"骑手位置",color:"#ffffff",fontSize:14,borderRadius:10,bgColor:"#000000",padding:10,display:"ALWAYS"}}],amapPlugin:null,key:"efe0a71f0e57210545d9f90650ea1397",addressName:"",weather:{hasData:!1,data:[]}}},onLoad:function(t){var e=this;this.amapPlugin=new o.default.AMapWX({key:this.key});var n=t.orderId;this.load(n),this.getRegeo(n),setInterval((function(){e.getRegeo(n)}),15e3)},methods:{getRegeo:function(e){var n=this;this.amapPlugin.getRegeo({success:function(a){console.log(a),console.log(a[0].longitude),console.log(a[0].latitude),"rider"==n.user.role&&n.$request.put("/orders/update",{longitude:a[0].longitude,latitude:a[0].latitude,id:e}).then((function(){})),n.$request.get("/orders/selectById/"+e).then((function(t){n.longitude=t.data.longitude,n.latitude=t.data.latitude,n.markers[0].longitude=t.data.longitude,n.markers[0].latitude=t.data.latitude})),n.addressName=a[0].name,t.hideLoading()},fail:function(t){console.log(t)}})},back:function(){t.navigateBack()},load:function(t){var e=this;this.$request.get("/orders/selectById/"+t).then((function(t){if(e.orders=t.data||{},e.colist=t.data.commentc||[],e.cerlist=t.data.certification||{},Object.keys(e.cerlist).length>0&&(e.coo=!0),e.colist.length>0){var n=0;e.colist.forEach((function(t){n+=t.star}));var a=n/e.colist.length;e.orders.averageStar=a}}))},toggleInfo:function(){t.navigateTo({url:"/pages/riderInfo/riderInfo?orderId="+this.orders.id})},getRiderLocation:function(t){var e=this;a.request({url:"/rider/getLocation/"+this.orders.id,success:function(t){var n=t.data,a=n.latitude,i=n.longitude;e.riderLocation={latitude:a,longitude:i},e.markers[0].latitude=a,e.markers[0].longitude=i},fail:function(t){console.error("Failed to get rider location:",t)}})}}};e.default=r}).call(this,n("df3c")["default"],n("3223")["default"])},"88b3":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var a={uniRate:function(){return n.e("uni_modules/uni-rate/components/uni-rate/uni-rate").then(n.bind(null,"6a6f"))},uniTag:function(){return n.e("uni_modules/uni-tag/components/uni-tag/uni-tag").then(n.bind(null,"66bb"))}},i=function(){var t=this.$createElement;this._self._c},o=[]},be11:function(t,e,n){"use strict";var a=n("e3e0"),i=n.n(a);i.a},e3e0:function(t,e,n){},fa21:function(t,e,n){"use strict";(function(t,e){var a=n("47a9");n("20fd");a(n("3240"));var i=a(n("2955"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(i.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])}},[["fa21","common/runtime","common/vendor"]]]);